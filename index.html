<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">

		<link rel="stylesheet" href="css/normalize.css">

		<link rel="stylesheet" href="js/codemirror/lib/codemirror.css">
		<link rel="stylesheet" href="css/common.css">
		<link rel="stylesheet" href="css/style.css">

		<script src="js/jquery-1.9.0.min.js"></script>
		<script src="js/esprima.js"></script>
		<script src="js/betterexamples.js"></script>
		<script src="js/betterexamples.editor.codemirror.js"></script>

		<!-- Codemirror -->
	    <script src="js/codemirror/lib/codemirror.js"></script>
	    <script src="js/codemirror/lib/util/continuecomment.js"></script>
	    <script src="js/codemirror/mode/javascript/javascript.js"></script>
	    <script src="js/codemirror/mode/css/css.js"></script>
	    <script src="js/codemirror/mode/xml/xml.js"></script>
	    <script src="js/codemirror/mode/htmlmixed/htmlmixed.js"></script>

		<script>
			$(function() {

				var codeeditor = CodeMirror.fromTextArea($(".code").get(0), {
					mode: "javascript", 
					tabMode: "indent",
					lineNumbers: true,
					matchBrackets: true,
					extraKeys: {"Enter": "newlineAndIndentContinueComment"}
				});
				codeeditor.setSize(null, "auto");
				var htmleditor = CodeMirror.fromTextArea($(".body").get(0), {
					mode: "htmlmixed", 
					tabMode: "indent",
					lineNumbers: true,
					matchBrackets: true
				});
				htmleditor.setSize(null, "auto");
				var csseditor = CodeMirror.fromTextArea($(".style").get(0), {
					mode: "css", 
					tabMode: "indent",
					lineNumbers: true,
					matchBrackets: true
				});
				csseditor.setSize(null, "auto");

				function run() {
					$(".totalresult").html("<iframe src='sandbox.html?css=" + encodeURIComponent(csseditor.getValue()).replace(/'/g,"%27") + 
						"&body=" + encodeURIComponent(htmleditor.getValue()).replace(/'/g,"%27") + 
						"&js=" + encodeURIComponent(codeeditor.getValue()).replace(/'/g,"%27") + 
						"'></iframe>");
				}

				$(".runbutton").click(function() {
					run();
				});

				$(document).keydown(function(e) {
					if (e.which == "120") {
						run();
					}
				});

			});
		</script>
	</head>
	<body>
		<div class='projects'>
			<div class='column'>
				<ul>
					<li><a a href='http://willemmulder.github.com/Presenteer.js/' target="_blank">Presenteer.js</a></li>
					<li><a href='http://learningjs.com'>Learning.js</a></li>
					<li><a href='http://willemmulder.github.com/BetterExamples.js/' target="_blank">BetterExamples.js</a></li>
					<li><a href='http://willemmulder.github.com/FilteredPaste.js/' target="_blank">FilteredPaste.js</a></li>
					<li class='active'><a  href='http://willemmulder.github.com/Sandbox.js/' target="_blank">Sandbox.js</a></li>
				</ul>
				<div class='filters'>

				</div>
			</div>
		</div>
		<div class='project'>
			<div class='top'>
				<div class='column'>
					<h1 class='shadowinset'>Sandbox.js</h1>
					<nav>
						<p>for JS, CSS, HTML</p>
						<ul>
							<li><a href='index.html'>for JS, CSS, HTML</a></li>
							<li><a href='javascript.html'>for JS</a></li>
						</ul>
					</nav>
					<button class='runbutton'>Click to Run (or press F9)</button>
				</div>
			</div>
			<div class='container'>
				<div class='totalinput'>
					<div>&lt;html&gt;
						<div>&lt;head&gt;
							<div>&lt;style&gt;
								<textarea class='style'>body { background: #aaa; }</textarea>
							&lt;/style&gt;</div>
							<div>&lt;script&gt;
								<textarea class='code'></textarea>
							&lt;/script&gt;</div>
						&lt;/head&gt;</div>
						<div>&lt;body&gt;
							<textarea class='body'><h1>HÃ©!</h1></textarea>
						&lt;/body&gt;</div>
					&lt;/html&gt;</div>
				</div>
				<div class='totalresult'>
					<iframe></iframe>
				</div>
				<div class='clearfix'>.</div>
			</div>
		</div>
		<div class='footer'>
		</div>
		<script type="text/javascript">
		  
		  // Analytics

		</script>
	</body>
</html>